# 3.1. Управление рецептами **FR-R**

## 3.1.1. Описание 

Функция **_Управление рецептами_** предоставляет **_Организатору_** возможность вести личную библиотеку **_Рецептов_** для последующего использования при подготовке **_Мероприятий_**. В рамках функции поддерживаются создание рецепта вручную, просмотр списка рецептов и детальной информации рецепта, а также редактирование и удаление рецептов. 

Функция предназначена для работы **_Организатора_**; **_Участник по ссылке_** не управляет библиотекой рецептов. Возможности обмена рецептами, автоматического импорта и архивирования рецептов не входят в Release 0.1 (MVP) (см. [раздел 1.3.3]() TODO ссылки).

**Связанные артефакты:** User Stories: [US-R1-R9](); Use Cases: [UC-R1](), [UC-R2](), [UC-R3](), [UC-R4]()

## 3.1.2. Функциональные требования

### FR-R1. Библиотека рецептов

#### FR-R1.1. Система должна отображать **_Организатору_** список сохранённых им **_Рецептов_** в библиотеке рецептов.
Приоритет: Высокий  
Источники: [US-R4](), [UC-R3]()

#### FR-R1.1a Система должна отображать сообщение об ошибке, если список сохранённых **_Рецептов_** не может быть загружен.
Приоритет: Высокий  
Источники: [UC-R3](), [BR-S2]()

#### FR-R1.2. Система должна позволять **_Организатору_** открыть выбранный **_Рецепт_** из библиотеки рецептов для просмотра.
Приоритет: Высокий  
Источники: [US-R5](), [UC-R3]()

#### FR-R1.2a Система должна отображать сообщение об ошибке, если выбранный **_Рецепт_** не может быть загружен.
Приоритет: Высокий  
Источники: [UC-R3](), [BR-S2]()

#### FR-R1.3. Система должна отображать состояние пустой библиотеки рецептов, если у **_Организатора_** нет сохранённых **_Рецептов_**.
Приоритет: Средний  
Источники: [UC-R3]()

#### FR-R1.4. Система должна предоставлять **_Организатору_** возможность перейти к созданию нового **_Рецепта_** из библиотеки рецептов.
Приоритет: Высокий  
Источники: [UC-R1](), [UC-R3](), [US-R1]()

#### FR-R1.5. Система должна отображать список **_Рецептов_** в библиотеке **_Организатора_** в алфавитном порядке по названию рецепта.
Приоритет: Средний  
Источники: [UC-R3]()


### FR-R2. Просмотр рецепта

#### FR-R2.1. Система должна отображать ***Организатору*** содержимое выбранного ***Рецепта*** для просмотра.
Приоритет: Высокий
Источники: [UC-R3](), [US-R5]()

#### FR-R2.1a Система должна отображать название рецепта.
Приоритет: Высокий  
Источники: [BR-R1.1](), [UC-R3]()

#### FR-R2.1b Система должна отображать список ингредиентов рецепта (не менее 1).
Приоритет: Высокий  
Источники: [BR-R1.2](), [UC-R3]()

#### FR-R2.1c Для каждого ингредиента система должна отображать его атрибуты: название, количество, единицы измерения, при наличии - примечание.
Приоритет: Высокий  
Источники: [BR-R1.3](), [UC-R3]()

#### FR-R2.1d Если для **_Рецепта_** указаны шаги приготовления, система должна отображать шаги приготовления.
Приоритет: Высокий  
Источники: [BR-R1.4](), [UC-R3]

#### FR-R2.1e. Если для **_Рецепта_** указано общее и/или активное время приготовления, система должна отображать соответствующее время.
Приоритет: Средний  
Источники: [BR-R1.5](), [UC-R3]()

#### FR-R2.1f. Если для **_Рецепта_** указана обложка, система должна отображать обложку.
Приоритет: Низкий  
Источники: [BR-R1.6](), [UC-R3]()

#### FR-R2.1g. Если для **_Рецепта_** указано количество порций, система должна отображать количество порций.
Приоритет: Высокий  
Источники: [BR-R1.8](), [UC-R3]()

#### FR-R2.1h Если для **_Рецепта_** не указано количество порций, система должна отображать количество порций равное 1.
Приоритет: Высокий  
Источники: [BR-R1.8](), [UC-R3]() 

#### FR-R2.1i Система должна отображать категорию рецепта.
Приоритет: Низкий  
Источники: [BR-R1.9](), [UC-R3]()

#### FR-R2.3. Система должна предоставлять **Организатору** возможность перейти к редактированию выбранного ***Рецепта***.
Приоритет:Высокий
Источники: [UC-R3](), [UC-R2]()

#### FR-R2.4. Система должна предоставлять **Организатору** возможность инициировать удаление выбранного ***Рецепта***.
Приоритет: Высокий
Источники: [UC-R3](), [UC-R4]()


### FR-R3. Создание рецепта

#### FR-R3.1. Система должна сохранять новый **_Рецепт_** по запросу **_Организатора_**, если данные **_Рецепта_** удовлетворяют правилам заполнения.
Приоритет: Высокий
Источники: [US-R1]() [UC-R1]()

#### FR-R3.1a. Если данные **_Рецепта_** не удовлетворяют правилам заполнения, система не должна сохранять **_Рецепт_** и должна сообщить ***Организатору*** причины отказа.
Приоритет: Высокий
Источники: [BR-R1.7], [UC-R1]()

#### FR-R3.1b. При отказе в сохранении система должна сохранять введённые ***Организатором*** данные **_Рецепта_** и предоставлять возможность исправить ошибки и повторить сохранение.
Приоритет: Высокий
Источники: [UC-R1]()

**Правила заполнения рецепта:**
#### FR-R3.2. Система должна отклонять сохранение **_Рецепта_**, если не указано название **_Рецепта_**.
Приоритет: Высокий
Источники: [BR-R1.1]()

#### FR-R3.3. Система должна отклонять сохранение **_Рецепта_**, если не указан ни один ингредиент.
Приоритет: Высокий
Источники: [BR-R1.2]()

#### FR-R3.4. Система должна отклонять сохранение **_Рецепта_**, если название **_Рецепта_** не является уникальным в библиотеке **_Организатора_**.
Приоритет: Высокий
Источники: [BR-R1.7]()

**Ингредиенты:**
#### FR-R3.5. Для каждого ингредиента система должна сохранять: название, количество и единицу измерения; при наличии — уточнение.
Приоритет: Высокий
Источники: [BR-R1.3.]()

#### FR-R3.6. Система должна предоставлять **_Организатору_** возможность выбирать ингредиенты из справочника ингредиентов.
Приоритет: Высокий
Источники:

#### FR-R3.7. Если требуемого ингредиента нет в справочнике, система должна предоставлять **_Организатору_** возможность ввести ингредиент вручную и сохранить его в составе **_Рецепта_**.
Приоритет: Высокий
Источники: см. раздел 4 TBD

**Дополнительные атрибуты рецепта:**
#### FR-R3.8. Если **_Организатор_** указал шаги приготовления, система должна сохранять и отображать шаги приготовления **_Рецепта_**.
Приоритет: Высокий
Источники: [BR-R1.4]()

#### FR-R3.9. Если **_Организатор_** указал общее время приготовления, система должна сохранять и отображать общее время приготовления **_Рецепта_**.
Приоритет: Низкий
Источники: [BR-R1.5]()

#### FR-R3.10. Если **_Организатор_** указал активное время приготовления, система должна сохранять и отображать активное время приготовления **_Рецепта_**.
Приоритет: Низкий
Источники: [BR-R1.5]()

#### FR-R3.11. Если **_Организатор_** указал обложку, система должна сохранять и отображать обложку **_Рецепта_**.
Приоритет: Средний
Источники:

#### FR-R3.12. Если **_Организатор_** указал категорию **_Рецепта_**, система должна сохранять и отображать категорию **_Рецепта_**.
Приоритет: Низкий
Источники: [BR-R1.9]()

#### FR-R3.13. Если **_Организатор_** не указал категорию **_Рецепта_**, система должна сохранять **_Рецепт_** с категорией «Другое».
Приоритет: Низкий
Источники: [BR-R1.9]()

#### FR-R3.14. Система должна предоставлять **_Организатору_** возможность прервать создание **_Рецепта_** до сохранения; при этом новый **_Рецепт_** не должен быть создан.
Приоритет: Высокий
Источники: [UC-R1]()


### FR-R4. Редактирование рецепта

#### FR-R4.1. Система должна предоставлять **_Организатору_** возможность редактировать ранее сохранённый **_Рецепт_**.
Приоритет: Высокий
Источники: [US-R2](), [UC-R2]()

#### FR-R4.2. Система должна сохранять изменения **_Рецепта_** по запросу **_Организатора_**, если данные **_Рецепта_** удовлетворяют правилам заполнения (см. требования раздела FR-R3).
Приоритет: Высокий
Источники: (см. требования раздела FR-R3)

#### FR-R4.3. Если данные **_Рецепта_** не удовлетворяют правилам заполнения, система не должна сохранять изменения и должна сообщить ***Организатору*** причины отказа.
Приоритет: Высокий
Источники: [BR-S2]()

#### FR-R4.5. При отказе в сохранении система должна сохранять введённые ***Организатором*** изменения и предоставлять возможность исправить ошибки и повторить сохранение.
Приоритет: Высокий
Источники: [UC-R2]()

#### FR-R4.6. При изменении названия **_Рецепта_** создавать копию рецепта с новым названием в библиотеке **_Организатора_**, старый рецепт при этом остаётся без изменений
Приоритет: Высокий
Источники: [UC-R2](), [US-R4]()

#### FR-R4.7. При изменении названия **_Рецепта_** система должна проверять уникальность нового названия в библиотеке **_Организатора_**; если новое название не уникально — отклонять сохранение.
Приоритет: Высокий
Источники: [BR-R1.7]()

#### FR-R4.8. Если отредактированный **_Рецепт_** используется в одном или нескольких **_Мероприятиях_**, система должна обеспечивать актуальность данных **_Рецепта_** в этих **_Мероприятиях_**.
Приоритет: Высокий
Источники: 

#### FR-R4.9. Если отредактированный **_Рецепт_** используется в **_Мероприятии_**, система должна обеспечивать актуальность **_Списка покупок_** этого **_Мероприятия_** с учётом внесённых изменений.
Приоритет: Высокий
Источники: 

#### FR-R4.10. Система должна предоставлять **_Организатору_** возможность выйти из редактирования **_Рецепта_** без сохранения; при этом изменения не должны применяться.
Приоритет: Высокий
Источники: [UC-R2]()

### FR-R5. Удаление рецепта

#### FR-R5.1. Система должна предоставлять **_Организатору_** возможность инициировать удаление выбранного **_Рецепта_** из просмотра рецепта.
Приоритет: Высокий  
Источники: [UC-R4]()

#### FR-R5.2. Перед удалением **_Рецепта_** система должна запрашивать подтверждение удаления у **_Организатора_**.
Приоритет: Средний  
Источники: [UC-R4]()

#### FR-R5.3. Система должна отклонять удаление **_Рецепта_**, если **_Рецепт_** используется хотя бы в одном **_Мероприятии_**.
Приоритет: Высокий  
Источники: [BR-R2.1](), [UC-R4]()

#### FR-R5.4. Если удаление **_Рецепта_** отклонено, система должна сообщить **_Организатору_** причину отказа.
Приоритет: Высокий  
Источники: [BR-R2.1](), [UC-R4]()

#### FR-R5.5. После подтверждения удаления и при отсутствии ограничений на удаление система должна удалить **_Рецепт_** из библиотеки **_Организатора_**.
Приоритет: Высокий  
Источники: [UC-R4]()

#### FR-R5.6. После удаления **_Рецепта_** система не должна предоставлять возможность восстановления **_Рецепта_** в рамках MVP.
Приоритет: Высокий  
Источники: [BR-R2.2]()
