# 3.2. Управление мероприятиями **FR-E**

## 3.2.1. Описание 

Функция ***Управление мероприятиями*** предоставляет ***Организатору*** возможность фиксировать параметры ***Мероприятия*** и состав меню. Организатор может поделиться этой информацией с ***Участниками по ссылке***. ***Участник по ссылке*** может посмотреть всю информацию о мероприятии и отметить купленные продукты (подробнее - п. 3.4). 

Поддерживается следующие функции: для ***Организатора*** - создание мероприятия, редактирование, добавление в него рецептов, возможность поделиться ссылкой-приглашением на мероприятие; для ***Участника по ссылке*** - посмотреть рецепты мероприятия.

Связанные артефакты:  
User Stories: US-E1 - US-E11
Use Cases: UC-E1 - UC-E7

# 3.2.2 Функциональные требования

### FR-E1. Библиотека мероприятий

#### FR-E1.1. Система должна отображать **_Организатору_** список созданных им **_Мероприятий_** в библиотеке мероприятий.
Приоритет: Высокий  
Источники: 

#### FR-E1.2. Для каждого **_Мероприятия_** в списке система должна отображать как минимум название **_Мероприятия_** и дату проведения **_Мероприятия_**.
Приоритет: Высокий  
Источники: 

#### FR-E1.3. Система должна отображать список **_Мероприятий_** в порядке возрастания даты проведения.
Приоритет: Средний  
Источники: 

#### FR-E1.4. Если несколько **_Мероприятий_** имеют одинаковую дату проведения, система должна сортировать их по времени проведения по возрастанию.
Приоритет: Низкий  
Источники: 

#### FR-E1.5. Система должна позволять **_Организатору_** открыть выбранное **_Мероприятие_** из списка для просмотра.
Приоритет: Высокий  
Источники: 

#### FR-E1.6. Система должна предоставлять **_Организатору_** возможность инициировать создание нового **_Мероприятия_** из библиотеки мероприятий.
Приоритет: Высокий  
Источники: 

#### FR-E1.7. Если у **_Организатора_** нет созданных **_Мероприятий_**, система должна отображать состояние пустой библиотеки мероприятий.
Приоритет: Высокий 
Источники: 

#### FR-E1.8. В состоянии пустой библиотеки мероприятий система должна предоставлять **_Организатору_** возможность перейти к созданию нового **_Мероприятия_**.
Приоритет: Средний  
Источники: 

#### FR-E1.9. Система должна отображать сообщение об ошибке, если список **_Мероприятий_** не может быть загружен.
Приоритет: Высокий  
Источники: 


### FR-E2. Просмотр мероприятия

#### FR-E2.1. Система должна предоставлять **_Организатору_** возможность открыть выбранное **_Мероприятие_** для просмотра.
Приоритет: Высокий  
Источники: [UC-E3](), [US-E2]()

#### FR-E2.2. Система должна предоставлять **_Участнику по ссылке_** возможность открыть **_Мероприятие_** для просмотра по **_Ссылке-приглашению_**.
Приоритет: Высокий  
Источники: [UC-E4](), [US-E8]()

#### FR-E2.3. Система должна отображать метаданные **_Мероприятия_**: название, дату проведения и время проведения.
Приоритет: Высокий  
Источники: [UC-E3](), [UC-E4](), [US-E2]()

#### FR-E2.4. Система должна отображать в **_Мероприятии_** список добавленных **_Рецептов_** и количество порций, заданное для каждого **_Рецепта_** в рамках **_Мероприятия_**.
Приоритет: Высокий  
Источники: [UC-E3](), [UC-E4](), [US-E4]()

#### FR-E2.5. Система должна позволять **_Организатору_** и **_Участнику по ссылке_** открыть выбранный **_Рецепт_** из списка рецептов **_Мероприятия_** для просмотра.
Приоритет: Высокий  
Источники: [UC-E3](), [UC-E4](), [US-E5]()

#### FR-E2.6. Система должна предоставлять **_Организатору_** и **_Участнику по ссылке_** доступ к связанному **_Списку покупок_** **_Мероприятия_** (см. раздел 3.3).
Приоритет: Высокий  
Источники: [UC-E3](), [UC-E4](), [US-E6]()

#### FR-E2.7. Система должна предоставлять **_Организатору_** возможность инициировать редактирование **_Мероприятия_**.
Приоритет: Высокий  
Источники: [UC-E5](), [US-E7]()

#### FR-E2.8. Система не должна предоставлять **_Участнику по ссылке_** возможность редактировать **_Мероприятие_** (метаданные и список рецептов).
Приоритет: Высокий  
Источники: [UC-E4](), [BR-E?]()

#### FR-E2.9. Система должна отображать сообщение об ошибке, если **_Мероприятие_** не может быть загружено.
Приоритет: Высокий  
Источники: [UC-E3](), [UC-E4](), [BR-S2]()

#### FR-E2.10. Система должна отображать сообщение об ошибке, если доступ к **_Мероприятию_** по **_Ссылке-приглашению_** невозможен (например, ссылка некорректна или **_Мероприятие_** удалено).
Приоритет: Высокий  
Источники: [UC-E4](), [UC-E7](), [BR-S2]()


### FR-E3. Создание мероприятия

#### FR-E3.1. Система должна предоставлять **_Организатору_** возможность создать новое **_Мероприятие_**.
Приоритет: Высокий  
Источники: [UC-E2](), [US-E3]()

#### FR-E3.2. При создании **_Мероприятия_** система должна обеспечивать ввод метаданных **_Мероприятия_**: название, дата проведения и время проведения.
Приоритет: Высокий  
Источники: [UC-E2](), [US-E3]()

#### FR-E3.3. Система должна отклонять создание **_Мероприятия_**, если не указано название **_Мероприятия_**.
Приоритет: Высокий  
Источники: [UC-E2](), [BR-E?]()

#### FR-E3.4. Система должна отклонять создание **_Мероприятия_**, если не указана дата проведения **_Мероприятия_**.
Приоритет: Высокий  
Источники: [UC-E2](), [BR-E?]()

#### FR-E3.5. Система должна отклонять создание **_Мероприятия_**, если указанная дата и время проведения находятся в прошлом на момент сохранения.
Приоритет: Средний  
Источники: [UC-E2](), [BR-E?]()

#### FR-E3.6. Система должна отклонять создание **_Мероприятия_**, если среди активных (не архивированных) **_Мероприятий_** **_Организатора_** уже существует **_Мероприятие_** с тем же названием и датой проведения (без учёта времени).
Приоритет: Высокий  
Источники: [UC-E2](), [BR-E?]()

#### FR-E3.7. Если создание **_Мероприятия_** отклонено в результате валидации метаданных, система должна сообщить **_Организатору_** причины отказа и предоставить возможность исправить данные и повторить создание без потери введённых данных.
Приоритет: Высокий  
Источники: [UC-E2](), [BR-S2]()

#### FR-E3.8. Система должна предоставлять **_Организатору_** возможность отменить создание **_Мероприятия_** до подтверждения сохранения; при этом новое **_Мероприятие_** не должно быть создано.
Приоритет: Средний  
Источники: [UC-E2]()

#### FR-E3.9. При успешном создании система должна сохранять новое **_Мероприятие_** и добавлять его в библиотеку **_Мероприятий_** **_Организатора_**.
Приоритет: Высокий  
Источники: [UC-E2](), [UC-E1]()

#### FR-E3.10. При успешном создании **_Мероприятия_** система должна создавать для него **_Ссылку-приглашение_** для доступа **_Участников по ссылке_**.
Приоритет: Высокий  
Источники: [UC-E2](), [UC-E4](), [US-E8]()

#### FR-E3.11. После успешного создания **_Мероприятия_** система должна предоставлять **_Организатору_** возможность редактировать созданное **_Мероприятие_**.
Приоритет: Высокий  
Источники: [UC-E2](), [UC-E5](), [US-E7]()

#### FR-E3.12. Система должна отображать сообщение об ошибке, если создание **_Мероприятия_** не может быть выполнено из-за ошибки сохранения или загрузки данных.
Приоритет: Высокий  
Источники: [UC-E2](), [BR-S2]()


### FR-E4. Редактирование мероприятия

#### FR-E4.1. Система должна предоставлять **_Организатору_** возможность редактировать метаданные **_Мероприятия_**.
Приоритет: Высокий  
Источники: [UC-E5](), [US-E7]()

#### FR-E4.2. При сохранении изменений метаданных **_Мероприятия_** система должна выполнять валидацию, аналогичную созданию **_Мероприятия_** (см. FR-E3.3–FR-E3.6).
Приоритет: Высокий  
Источники: [UC-E5](), [BR-E?]()

#### FR-E4.3. Если изменения метаданных **_Мероприятия_** отклонены в результате валидации, система должна сообщить **_Организатору_** причины отказа и предоставить возможность исправить данные и повторить сохранение без потери введённых изменений.
Приоритет: Высокий  
Источники: [UC-E5](), [BR-S2]()

#### FR-E4.4. Система должна предоставлять **_Организатору_** возможность добавить **_Рецепт_** из своей библиотеки рецептов в список рецептов **_Мероприятия_**.
Приоритет: Высокий  
Источники: [UC-E5](), [US-E4]()

#### FR-E4.5. Система не должна предоставлять возможность добавлять в **_Мероприятие_** **_Рецепты_**, отсутствующие в библиотеке рецептов **_Организатора_**.
Приоритет: Высокий  
Источники: [UC-E5](), [BR-E?]()

#### FR-E4.6. Система должна предоставлять **_Организатору_** возможность удалить **_Рецепт_** из списка рецептов **_Мероприятия_**.
Приоритет: Высокий  
Источники: [UC-E5](), [US-E4]()

#### FR-E4.7. Система должна предоставлять **_Организатору_** возможность изменить количество порций для **_Рецепта_**, добавленного в **_Мероприятие_** (порции — атрибут **_Рецепта_** в рамках **_Мероприятия_**).
Приоритет: Высокий  
Источники: [UC-E5](), [US-E4]()

#### FR-E4.8. Система не должна дублировать **_Рецепт_** в составе **_Мероприятия_**, если **_Организатор_** пытается добавить **_Рецепт_**, уже добавленный в это **_Мероприятие_**.
Приоритет: Высокий  
Источники: [UC-E5](), [BR-E?]()

#### FR-E4.9. В случае повторного добавления **_Рецепта_** в **_Мероприятие_** система должна сообщить **_Организатору_**, что **_Рецепт_** уже добавлен, и предоставить возможность изменить количество порций для этого **_Рецепта_**.
Приоритет: Средний  
Источники: [UC-E5](), [BR-E?]()

#### FR-E4.10. Система должна сохранять изменения состава **_Мероприятия_** (добавление/удаление **_Рецептов_**, изменение порций) без отдельного подтверждения сохранения пользователем.
Приоритет: Высокий  
Источники: [UC-E5](), [BR-E?]()

#### FR-E4.11. При изменении состава **_Мероприятия_** система должна обеспечивать актуальность связанного **_Списка покупок_** **_Мероприятия_** (см. раздел 3.3).
Приоритет: Высокий  
Источники: [UC-E5](), [UC-E6](), [US-S?]()


### FR-E5. Удаление, архивирование и повтор мероприятий

#### FR-E5.1. Система должна предоставлять **_Организатору_** возможность инициировать удаление выбранного **_Мероприятия_**.
Приоритет: Высокий  
Источники: [UC-E7](), [US-E10]()

#### FR-E5.2. Перед удалением **_Мероприятия_** система должна запрашивать подтверждение удаления у **_Организатора_**.
Приоритет: Средний  
Источники: [UC-E7]()

#### FR-E5.3. После подтверждения удаления система должна удалить **_Мероприятие_** без возможности восстановления в рамках MVP.
Приоритет: Высокий  
Источники: [UC-E7](), [BR-E?]()

#### FR-E5.4. После удаления **_Мероприятия_** система должна делать **_Ссылку-приглашение_** для этого **_Мероприятия_** недействительной.
Приоритет: Высокий  
Источники: [UC-E7](), [BR-E?]()

#### FR-E5.5. При попытке открыть удалённое **_Мероприятие_** (в т.ч. по недействительной **_Ссылке-приглашению_**) система должна отображать сообщение о том, что **_Мероприятие_** удалено.
Приоритет: Высокий  
Источники: [UC-E7](), [BR-S2]()

---

#### FR-E5.6. Система должна предоставлять **_Организатору_** возможность архивировать выбранное **_Мероприятие_**.
Приоритет: Высокий  
Источники: [UC-E8](), [US-E11]()

#### FR-E5.7. При архивировании **_Мероприятия_** система должна перемещать **_Мероприятие_** из библиотеки активных **_Мероприятий_** в архив **_Мероприятий_** **_Организатора_**.
Приоритет: Высокий  
Источники: [UC-E8]()

#### FR-E5.8. Система должна предоставлять **_Организатору_** возможность просматривать список архивированных **_Мероприятий_** и открывать архивированное **_Мероприятие_** для просмотра.
Приоритет: Высокий  
Источники: [UC-E9]()

#### FR-E5.9. Система не должна предоставлять возможность редактировать архивированное **_Мероприятие_** (метаданные и состав).
Приоритет: Высокий  
Источники: [UC-E9](), [BR-E?]()

#### FR-E5.10. При попытке редактировать архивированное **_Мероприятие_** система должна сообщить **_Организатору_**, что архивированное **_Мероприятие_** доступно только для просмотра.
Приоритет: Средний  
Источники: [UC-E9](), [BR-S2]()

#### FR-E5.11. Система должна обеспечивать доступ к архивированному **_Мероприятию_** по **_Ссылке-приглашению_** в режиме просмотра (без возможности редактирования).
Приоритет: Средний  
Источники: [UC-E4](), [UC-E9]()

---

#### FR-E5.12. При архивировании **_Мероприятия_** система должна сохранять состав **_Мероприятия_** в виде списка элементов «ссылка на **_Рецепт_** (recipe_id) + количество порций», а также название **_Рецепта_** на момент архивирования для отображения в архивированном **_Мероприятии_**.
Приоритет: Высокий  
Источники: [UC-E8](), [BR-E?]()

#### FR-E5.13. При открытии **_Рецепта_** из архивированного **_Мероприятия_** система должна открывать текущую версию **_Рецепта_** для просмотра, если **_Рецепт_** существует.
Приоритет: Высокий  
Источники: [UC-E9](), [UC-R3]()

#### FR-E5.14. При попытке открыть **_Рецепт_** из архивированного **_Мероприятия_**, если **_Рецепт_** удалён, система должна отображать сообщение о том, что **_Рецепт_** удалён.
Приоритет: Высокий  
Источники: [UC-E9](), [BR-S2]()

---

#### FR-E5.15. Система должна предоставлять **_Организатору_** возможность разархивировать архивированное **_Мероприятие_**.
Приоритет: Средний  
Источники: [UC-E10]()

#### FR-E5.16. При разархивации система должна выполнять проверку уникальности сочетания «название **_Мероприятия_** + дата проведения (без времени)» среди активных **_Мероприятий_** **_Организатора_**; при конфликте система должна отклонять разархивацию и сообщать причину.
Приоритет: Средний  
Источники: [UC-E10](), [BR-E?](), [BR-S2]()

#### FR-E5.17. При успешной разархивации система должна перемещать **_Мероприятие_** из архива **_Мероприятий_** в библиотеку активных **_Мероприятий_**.
Приоритет: Средний  
Источники: [UC-E10]()

---

#### FR-E5.18. Система должна предоставлять **_Организатору_** возможность повторить архивированное **_Мероприятие_** путём создания нового **_Мероприятия_** на основе архивированного.
Приоритет: Высокий  
Источники: [UC-E11](), [US-E11]()

#### FR-E5.19. При повторении архивированного **_Мероприятия_** система должна создавать новое **_Мероприятие_** и копировать в него состав: «ссылка на **_Рецепт_** (recipe_id) + количество порций».
Приоритет: Высокий  
Источники: [UC-E11](), [BR-E?]()

#### FR-E5.20. Если при повторении архивированного **_Мероприятия_** некоторые **_Рецепты_** недоступны (удалены), система должна сообщить **_Организатору_** о таких **_Рецептах_** и не добавлять их в новое **_Мероприятие_**.
Приоритет: Высокий  
Источники: [UC-E11](), [BR-S2]()

#### FR-E5.21. После повторения архивированного **_Мероприятия_** система должна предоставлять **_Организатору_** возможность редактировать созданное **_Мероприятие_**.
Приоритет: Высокий  
Источники: [UC-E11](), [UC-E5]()
