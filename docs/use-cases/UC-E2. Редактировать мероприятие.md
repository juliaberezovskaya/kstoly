# UC-E2. Редактировать мероприятие

*Автор*: Березовская Юлия
*Дата создания*: 27.11.2025

[Схема]()

---

## 1. Основное действующее лицо
Организатор

---

## 2. Дополнительные действующие лица
Отсутствуют

---

## 3. Описание
Организатор редактирует мероприятие: управляет рецептами, при необходимости меняет дату и название мероприятия.

---

## 4. Условие-триггер
Организатор открывает мероприятие и инициирует редактирование.

---

## 5. Предварительные условия
PRE-1. Редактируемое мероприятие существует.
PRE-2. Мероприятие не находится в архиве (см. BR-E2.2).

---

## 6. Выходные условия
POST-1. Изменения в рецептах, метаданных и порциях сохранены.
POST-2. Список покупок актуализирован согласно бизнес-правилам.

---

## 7. Нормальное направление (основной поток)
1. Система отображает текущую информацию по мероприятию (см. BR-E1).
2. Организатор изменяет список рецептов мероприятия (добавляет и/или удаляет рецепты).
3. Система сохраняет изменения состава рецептов.
4. Система обновляет список покупок мероприятия в соответствии с бизнес-правилами BR-L1 (добавляет/удаляет продукты, связанные с изменёнными рецептами, не пересчитывая список целиком). 
5. Организатор завершает редактирование.

---

## 8. Альтернативные направления
### A1. Изменение метаданных мероприятия
1. Организатор инициирует изменение метаданных мероприятия (дата, название).
2. Система отображает экран изменения метаданных мероприятия.
3. Организатор вводит данные. 
4. Организатор инициирует сохранение изменений метаданных.
5. Система сохраняет метаданные и возвращается к пункту 1 основного потока.

## A2. Изменение количества порций рецепта
1. Организатор изменяет количество порций для выбранного рецепта.
2. Система пересчитывает количество ингредиентов согласно BR-L2.
3. Система обновляет список покупок инкрементально согласно BR-L1.

### A3. Изменение списка покупок
1. Организатор в основном потоке может инициировать редактирование списка продуктов и перейти к UC-L1. 

### A4. Полное пересоздание списка покупок  
1. Организатор выбирает действие «Пересоздать список покупок».
2. Система перенаправляет к сценарию UC-L1 (альтернативный поток A5).

---

## 9. Исключения

### E1. Ошибка добавления рецепта
1. Организатор добавляет рецепт
2. На стороне сервера возникает ошибка добавления рецепта в мероприятие.
3. Система оповещает пользователя об ошибке, изменения не применяются.
4. Система возвращается к пункту 1 основного потока.

### E2. Ошибка сохранения данных мероприятия
1. Организатор меняет название и/или дату мероприятия, на те, которые уже существуют в системе.
2. Организатор инициирует сохранение.
3. Система оповещает пользователя об ошибке.
4. Система остаётся на экране редактирования метаданных (см. A1) и просит исправить данные.


---

## 10. Приоритет
**Высокий**

---

## 11. Бизнес-правила
- BR-E1
- BR-L1
- BR-L2

---

## 12. Другая информация

- Связанные US: US-E3, US-E4, US-E5, US-E6.
- В будущем тут будут назначаться участники мероприятия

---

## 13. Предположения
- P1. Система сохраняет изменения в при добавлении рецепта в мероприятие.
