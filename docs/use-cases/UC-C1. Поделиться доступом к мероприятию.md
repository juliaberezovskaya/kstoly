# UC-C1. Поделиться доступом к мероприятию.

*Автор*: Березовская Юлия
*Дата создания*: 29.11.2025

[Схема](diagrams/Коллаборация.drawio.png)

---

## 1. Основное действующее лицо
Организатор

---

## 2. Дополнительные действующие лица

---

## 3. Описание
Организатор делится сгенерированной ссылкой-приглашением для доступа к мероприятию.

---

## 4. Условие-триггер
Организатор инициирует действие "Поделиться ссылкой".

---

## 5. Предварительные условия
PRE-1. Организатор имеет доступ к существующему мероприятию.
PRE-2. Мероприятие существует и доступно для чтения системой.

---

## 6. Выходные условия
POST-1. Буфер обмена содержит ссылку-приглашение.
POST-2. Ссылка создана в системе и может быть использована другими пользователями (если она ещё не существовала).

---

## 7. Нормальное направление (основной поток)
1. Организатор выбирает действие «Поделиться мероприятием».
2. Система показывает уже существующую ссылку-приглашение.
3. Организатор выбирает «Копировать ссылку».
4. Система копирует ссылку в буфер обмена.
5. Система показывает сообщение о копировании.
---

## 8. Альтернативные направления

---

## 9. Исключения

### E1. Ошибка получения ссылки ссылки
1. На шаге 2 основного потока происходит техническая ошибка.
2. Ошибка обрабатывается согласно BR-S2.

### E2. Ошибка копирования ссылки в буфер обмена
1. На шаге 3 основного потока система пытается скопировать ссылку в буфер, но операция отклонена политиками браузера/ОС (например, Safari iOS без жеста пользователя).
2. Система отображает сообщение: «Не удалось автоматически скопировать ссылку».
3. Система предлагает альтернативу:
- показать ссылку в модальном окне,
- предоставить кнопку «Скопировать вручную» или действие «Поделиться».
4. Организатор вручную копирует или делится ссылкой.

---

## 10. Приоритет
**Высокий**

---

## 11. Бизнес-правила
- [BR-C1](../business-rules.md#br-c1-доступ-к-мероприятию-по-ссылке), 
[BR-C2](../business-rules.md#br-c2-права-организатора), 
[BR-C3](../business-rules.md#br-c3-права-участника-по-ссылке)
- [BR-S2](../business-rules.md#br-s-общие-правила-обработки-ошибок)

---

## 12. Другая информация

- Связанные US: 
[US-C1](../user-stories.md#us-c1-как-организатор-я-хочу-поделиться-доступом-к-мероприятию-чтобы-помощники-знали-что-покупать-и-что-готовить).

---

## 13. Предположения
- P1. Организатор поделится сформированной ссылкой с участниками вне приложения.
- P2. Ссылка формируется системой на основе уникального токена приглашения, привязанного к конкретному мероприятию (BR-C1).
- P3. Пользователь, открывший ссылку, получает права согласно BR-C2–C3
- P4. В MVP отсутствует управление доступом (нет отзыва, нет списка приглашённых)
- P5. Система может создавать ссылку приглашения заранее либо при первом запросе на генерацию.
- P6. Переход по ссылке не требует учетной записи