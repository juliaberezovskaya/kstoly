# UC-C1. Поделиться доступом к мероприятию.

*Автор*: Березовская Юлия
*Дата создания*: 29.11.2025

[Схема]()

---

## 1. Основное действующее лицо
Организатор

---

## 2. Дополнительные действующие лица

---

## 3. Описание
Организатор делится сгенерированной ссылкой-приглашением для доступа к мероприятию.

---

## 4. Условие-триггер
Организатор инициирует действие "Поделиться ссылкой".

---

## 5. Предварительные условия
PRE-1. Организатор имеет доступ к существующему мероприятию.
PRE-2. Мероприятие существует и доступно для чтения системой.

---

## 6. Выходные условия
POST-1. Буфер обмена содержит ссылку-приглашение.
POST-2. Ссылка создана в системе и может быть использована другими пользователями (если она ещё не существовала).

---

## 7. Нормальное направление (основной поток)
1. Организатор инициирует действие "Поделиться".
2. Система создаёт ссылку, по которой можно получить доступ к мероприятию согласно BR-C2 и BR-C3, если она ещё не была создана.
3. Система копирует ссылку в буфер обмена.
4. Система уведомляет огранизатора о том, что ссылка скопирована в буфер обмена.

---

## 8. Альтернативные направления

### A1. Ссылка уже существует
1. На шаге 2 система определяет, что ссылка уже была создана ранее.
2. Система использует существующую ссылку.
3. Далее сценарий продолжается с шага 3 основного потока.

---

## 9. Исключения

### E1. Ошибка генерации ссылки
1. На шаге 2 основного потока система не может создать уникальную ссылку доступа (ошибка сервера, отсутствует соединение или не удаётся получить токен приглашения).
2. Система сообщает организатору, что ссылку сформировать не удалось.
3. Система предлагает повторить попытку позже.
4. Основной поток завершается без изменений.

### E2. Ошибка копирования ссылки в буфер обмена
1. На шаге 3 основного потока система пытается скопировать ссылку в буфер, но операция отклонена политиками браузера/ОС (например, Safari iOS без жеста пользователя).
2. Система отображает сообщение: «Не удалось автоматически скопировать ссылку».
3. Система предлагает альтернативу:
- показать ссылку в модальном окне,
- предоставить кнопку «Скопировать вручную» или действие «Поделиться».
4. Организатор вручную копирует или делится ссылкой.

---

## 10. Приоритет
**Высокий**

---

## 11. Бизнес-правила
- BR-C1, BR-C2, BR-C3

---

## 12. Другая информация

- Связанные US: US-C1.

---

## 13. Предположения
- P1. Организатор поделится сформированной ссылкой с участниками вне приложения.
- P2. Ссылка формируется системой на основе уникального токена приглашения, привязанного к конкретному мероприятию (BR-C1).
- P3. Пользователь, открывший ссылку, получает права согласно BR-C2–C3
- P4. В MVP отсутствует управление доступом (нет отзыва, нет списка приглашённых)
- P5. Система может создавать ссылку приглашения заранее либо при первом запросе на генерацию.
- P6. Переход по ссылке не требует учетной записи